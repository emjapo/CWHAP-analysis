---
title: "Post-survey Qualrics Analysis for Collaborative Problem Solving in Asymmetric Virtual Reality"
output: html_document
date: "`r Sys.Date()`"
---

# Exploring the Data

The post task survey contains a team processes instrument, the NASA-TLX, and the SUS that need to be scored. Additionally, 
there are two 11-point single question evaluations of the participant and their teammate.

We will start by examining and cleaning the data before scoring it.

```{r setup, include=FALSE}
library(dplyr)
library(ggplot2)
library(lubridate) 
library(gghighlight)
library(RColorBrewer)
library(gridExtra)
library(tidyr)
library(stringr)
library(R.utils)

```


```{r}
postData <- read.csv("../HCC8500-post_03-18.csv")
experimentData <- read.csv("../Experiment_Log.csv")

colnames(postData)
# our data starts at pid
head(postData)
# first two rows are subheadings/labels and can be removed
postData <- postData[- (1:2), ] %>%
  select(-StartDate, -EndDate, -Status, -IPAddress, -Progress, -Duration..in.seconds., -Finished, -RecordedDate, -ResponseId, -RecipientLastName, -RecipientFirstName, -RecipientEmail, -ExternalReference, -LocationLatitude, -LocationLongitude, -DistributionChannel, -UserLanguage)
head(postData)

summary(postData)

colnames(experimentData)
# Session.ID, VR.PID, PC.PID are the important ones for parsing data
head(experimentData)

summary(experimentData)


# create a vector for the column numbers we want make numeric
col_nums <- c(2:33)

# apply as.numeric() to those columns then print out data type to check
postData[col_nums] <- sapply(postData[col_nums], as.numeric)
sapply(postData, class)

# remove vector we no longer need
rm(col_nums)
```


# Team Processes

There is a little confusion on how to score this. I am taking guidance from Dr. Olivia B. Newton and scoring per individual by averaging the scores. I will keep the subscales separate since they might help better explain performance.

```{r team_processes}

tp <- postData %>%
  mutate(teamprocess_mean = select(., starts_with(c("transition", "action", "interpersonal"))) %>% rowMeans(),
         transition_process_mean = select(., starts_with(c("transition"))) %>% rowMeans(),
         action_process_mean = select(., starts_with(c("action"))) %>% rowMeans(),
         interpersonal_process_mean = select(., starts_with(c("interpersonal"))) %>% rowMeans())

head(tp)

postData <- tp

```


# SUS

The formula for scoring the SUS can be found in the main README.

```{r sus}


postData <- postData %>%
  mutate(sus = 2.5 * (20 + (select(., usability, usability.2, usability.4, usability.6, usability.8 ) %>% rowSums()) - (select(., usability.1, usability.3, usability.5, usability.7, usability.9) %>% rowSums()) ))


head(postData)

```


# Performance Evaluation Similarity